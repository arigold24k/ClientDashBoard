{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{Route,Switch,Redirect}from\"react-router-dom\";import Login1 from\"./pages/Login1\";import Checkout from'./pages/ClientCheckout';import Report from'./pages/Reporting';import Dashboard from'./pages/DashBoard';import axios from'axios';import'./App.css';import{withRouter}from'react-router-dom';import PrivateRoute from'./components/PrivateRoute';import SignUP from'./pages/SignUpPage';import passwordRS from'./components/PasswordReset';import funcs_ from'./functions/functions';import update from'./pages/updatePW';require('es6-promise').polyfill();var initialState={open1:false,open3:false,redirectToRefererrer:false,open:false,open4:false,open5:false,auth:false};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.myCheckOutPage=function(){return React.createElement(Checkout,{handleSignOut:_this.signOut.bind(_assertThisInitialized(_this)),companyname:_this.state.compName});};_this.myReportingPage=function(){return React.createElement(Report,{handleSignOut:_this.signOut.bind(_assertThisInitialized(_this)),companyname:_this.state.compName});};_this.myDashboardPage=function(){return React.createElement(Dashboard,{handleSignOut:_this.signOut.bind(_assertThisInitialized(_this)),companyname:_this.state.compName});};_this.getValue=function(event){// Updates the input state\nvar _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.clearState=function(){_this.setState(initialState);};_this.handleClose=function(){_this.setState({open:false,open1:false});_this.clearState();window.location.href='/login1';};_this.handlesubmit=function(event){event.preventDefault();var pwHolder=_this.state.password;if((typeof _this.state.usrname==='undefined'||_this.state.usrname==null)&&(typeof _this.state.password==='undefined'||_this.state.password==null)){_this.setState({open3:true});}else{var dataObj=_objectSpread({},_this.state);dataObj.password=funcs_.encryptPW(pwHolder);// console.log(\"created data object app.js page line 118 \", dataObj);\naxios.post('/login',dataObj).then(function(res,err){// console.log('this is the response for the login', res);\n// console.log('this is the response for the login', res.data);\nif(typeof res.data.password!=='undefined'){var check=funcs_.checkPW(_this.state.password,res.data.password);_this.setState({password:''});var tokenObj={check:check,id:res.data.id,username:res.data.username,email:res.data.Email,comp:res.data.CompCode,compname:res.data.comp_name};if(check){//creating token\naxios.post('/verify/api',tokenObj).then(function(res,err){// console.log(\"app. js handle submit verify request response, res: \", res);\nif(typeof res.data.token!=='undefined'){//save this on local storage\nsessionStorage.setItem('token',res.data.token);_this.setState({auth:true,email:res.data.email,compName:res.data.compName});// console.log('this is the state after the auth was udpated ', this.state);\n_this.props.history.push('/home_page');}else{_this.setState({open:true});}});}else{_this.setState({open:true});}}else{_this.setState({open5:true});}}).catch(function(e){// console.log('Error: ', e);\n});}};_this.handleAdd=function(event){event.preventDefault();// console.log('this is the state of the log-in page', this.state);\nvar dataObj=_objectSpread({},_this.state);dataObj.password=funcs_.encryptPW(_this.state.password);// console.log(\"this is the hashed password, \", dataObj.password);\naxios.post('/register',dataObj).then(function(res,err){// console.log('just wanted to see the error ', err);\nif(err){// console.log('There was an error ', err);\n}else{// res.status(200).json({message: 'this is the data' + res});\nif(res.data.data===0){// console.log('Data was not Added.  User already exist ', res);\n_this.setState({open1:true});}else if(res.data.data===3){// console.log('Data was not Added.  User already exist ', res);\n_this.setState({open1:true});}else{// console.log('Data was added ', res);\n_this.setState({open4:true});}}}).catch(function(e){// console.log('Error: ', e);\n});};_this.state=initialState;return _this;}_createClass(App,[{key:\"signOut\",value:function signOut(){sessionStorage.removeItem('token');this.setState({auth:false});window.location.reload();}},{key:\"reload\",value:function reload(){window.location.reload();}},{key:\"getKey\",value:function getKey(){var _this2=this;var token=window.sessionStorage.getItem('token');// console.log('before it hits the api verify route ', token);\n// console.log(\"This is the path, \", window.location);\nif(token!==null){axios.post('/api/verify',{token:token}).then(function(res,err){// console.log('This is the response from the getkey route ', res.data);\n// console.log('This is the type of for the res.data ', typeof res.data);\n// console.log('this is the data for res.data.data ', res.data.dataObj);\n// return res.data.data === true;\nif(res.data.dataObj.data===true){_this2.setState({companyCode:res.data.dataObj.compCD,email:res.data.dataObj.email,auth:true,compName:res.data.dataObj.compName});// console.log(\"state \", this.state);\n}else{_this2.setState({auth:false});}if(_this2.props.location.pathname==='/login1'&&_this2.state.auth===true){_this2.props.history.push('/home_page');//creating a timeout to reload page once the token has expired\n// console.log('value being passed to the set time out ', (res.data.dataObj.expires - new Date().getTime() ));\n// this.interval = setTimeout(this.reload, + res.data.dataObj.expires + new Date().getTime() );\n}});}else{this.setState({auth:false});}}},{key:\"componentWillMount\",value:function componentWillMount(){// clearTimeout(this.interval);\nthis.getKey();// console.log('This is the state in the component will mount ', this.state);\n// document.title = 'Client Dashboard';\n}},{key:\"componentDidMount\",value:function componentDidMount(){// console.log(\"This is the state when the component moutned \", this.state);\n// window.location.href = '/login1';\n}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Switch,null,React.createElement(Redirect,{exact:true,from:\"/\",to:\"/login1\"}),React.createElement(Route,{exact:true,path:\"/login1\"},React.createElement(Login1,{getValue:this.getValue.bind(this),usrname:this.state.usrname,open3:this.state.open3,open4:this.state.open4,open5:this.state.open5,handlesubmit:this.handlesubmit.bind(this),handleAdd:this.handleAdd.bind(this),open:this.state.open,open1:this.state.open1,handleClose:this.handleClose.bind(this)})),React.createElement(Route,{exact:true,path:\"/signup\",component:SignUP}),React.createElement(Route,{exact:true,path:\"/forgotdorwssap\",component:passwordRS}),React.createElement(Route,{exact:true,path:\"/updateinfo/:id\",component:update}),React.createElement(PrivateRoute,{exact:true,path:\"/home_page\",component:this.myDashboardPage,auth:this.state.auth}),React.createElement(PrivateRoute,{exact:true,path:\"/manage_inv\",component:this.myCheckOutPage,auth:this.state.auth}),React.createElement(PrivateRoute,{exact:true,path:\"/reporting\",component:this.myReportingPage,auth:this.state.auth})));}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["C:\\Users\\avidal\\Documents\\WebApps\\clientDashboard\\ClientDashBoard\\client\\src\\App.js"],"names":["React","Component","Route","Switch","Redirect","Login1","Checkout","Report","Dashboard","axios","withRouter","PrivateRoute","SignUP","passwordRS","funcs_","update","require","polyfill","initialState","open1","open3","redirectToRefererrer","open","open4","open5","auth","App","props","myCheckOutPage","signOut","bind","state","compName","myReportingPage","myDashboardPage","getValue","event","target","name","value","setState","clearState","handleClose","window","location","href","handlesubmit","preventDefault","pwHolder","password","usrname","dataObj","encryptPW","post","then","res","err","data","check","checkPW","tokenObj","id","username","email","Email","comp","CompCode","compname","comp_name","token","sessionStorage","setItem","history","push","catch","e","handleAdd","removeItem","reload","getItem","companyCode","compCD","pathname","getKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport Login1 from \"./pages/Login1\";\nimport Checkout from './pages/ClientCheckout';\nimport Report from './pages/Reporting';\nimport Dashboard from './pages/DashBoard';\nimport axios from 'axios';\nimport './App.css';\nimport { withRouter } from 'react-router-dom';\nimport PrivateRoute from './components/PrivateRoute';\nimport SignUP from './pages/SignUpPage';\nimport passwordRS from './components/PasswordReset';\nimport funcs_ from './functions/functions';\nimport update from './pages/updatePW';\nrequire('es6-promise').polyfill();\n\nconst initialState = {open1: false,\n    open3: false,\n    redirectToRefererrer: false,\n    open: false,\n    open4: false,\n    open5: false,\n    auth: false\n};\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = initialState;\n    };\n    myCheckOutPage = () => {\n        return (\n            <Checkout handleSignOut={this.signOut.bind(this)} companyname={this.state.compName} />\n        )\n    };\n    myReportingPage = () => {\n        return (\n            <Report handleSignOut={this.signOut.bind(this)} companyname={this.state.compName} />\n        )\n    };\n    myDashboardPage = () => {\n        return (\n            <Dashboard handleSignOut={this.signOut.bind(this)} companyname={this.state.compName}/>\n        )\n    };\n    signOut(){\n        sessionStorage.removeItem('token');\n        this.setState({auth: false});\n        window.location.reload();\n    };\n    reload () {\n        window.location.reload();\n    }\n    getKey (){\n        const token = window.sessionStorage.getItem('token');\n        // console.log('before it hits the api verify route ', token);\n        // console.log(\"This is the path, \", window.location);\n        if(token !== null) {\n            axios.post('/api/verify', {token}).then((res, err) => {\n\n                // console.log('This is the response from the getkey route ', res.data);\n                // console.log('This is the type of for the res.data ', typeof res.data);\n                // console.log('this is the data for res.data.data ', res.data.dataObj);\n\n                // return res.data.data === true;\n                if(res.data.dataObj.data === true){\n                    this.setState({companyCode : res.data.dataObj.compCD, email: res.data.dataObj.email, auth: true, compName: res.data.dataObj.compName});\n                    // console.log(\"state \", this.state);\n                }else{\n                    this.setState({auth:false})\n                }\n                if(this.props.location.pathname ==='/login1' && this.state.auth === true) {\n                    this.props.history.push('/home_page');\n\n                    //creating a timeout to reload page once the token has expired\n                    // console.log('value being passed to the set time out ', (res.data.dataObj.expires - new Date().getTime() ));\n                    // this.interval = setTimeout(this.reload, + res.data.dataObj.expires + new Date().getTime() );\n                }\n            });\n        }else{\n            this.setState({auth:false})\n        }\n    }\n    componentWillMount(){\n        // clearTimeout(this.interval);\n        this.getKey();\n        // console.log('This is the state in the component will mount ', this.state);\n        // document.title = 'Client Dashboard';\n\n      };\n    componentDidMount() {\n        // console.log(\"This is the state when the component moutned \", this.state);\n        // window.location.href = '/login1';\n    }\n    getValue = (event) => {\n        // Updates the input state\n        const {name, value} = event.target;\n        this.setState(\n            {\n                [name]: value\n            }\n        );\n    };\n\n    clearState = () => {\n        this.setState(initialState)\n    };\n\n    handleClose = () => {\n        this.setState({ open: false, open1: false });\n        this.clearState();\n        window.location.href = '/login1'\n    };\n\n    handlesubmit = (event) => {\n        event.preventDefault();\n        const pwHolder = this.state.password;\n        if((typeof (this.state.usrname) === 'undefined' || (this.state.usrname == null)) && (typeof this.state.password === 'undefined' || this.state.password == null)) {\n            this.setState({open3: true});\n        }else {\n            let dataObj ={...this.state};\n            dataObj.password = funcs_.encryptPW(pwHolder);\n\n        // console.log(\"created data object app.js page line 118 \", dataObj);\n\n        axios.post('/login', dataObj).then((res, err) => {\n            // console.log('this is the response for the login', res);\n            // console.log('this is the response for the login', res.data);\n            if(typeof (res.data.password) !== 'undefined' ){\n                const check = funcs_.checkPW(this.state.password, res.data.password);\n                this.setState({password: ''});\n                const tokenObj = {\n                    check: check,\n                    id: res.data.id,\n                    username: res.data.username,\n                    email: res.data.Email,\n                    comp: res.data.CompCode,\n                    compname: res.data.comp_name\n                };\n\n                if (check) {\n                    //creating token\n                    axios.post('/verify/api', tokenObj).then((res, err) => {\n                        // console.log(\"app. js handle submit verify request response, res: \", res);\n                        if(typeof res.data.token !== 'undefined') {\n                            //save this on local storage\n                            sessionStorage.setItem('token', res.data.token);\n                            this.setState({auth: true, email: res.data.email, compName: res.data.compName});\n                            // console.log('this is the state after the auth was udpated ', this.state);\n                            this.props.history.push('/home_page');\n                        }else{\n                            this.setState({open: true});\n                        }\n                    })\n                }else {\n                    this.setState({open: true});\n                }\n            }else {\n                this.setState({open5: true});\n            }\n        }).catch((e) => {\n            // console.log('Error: ', e);\n        });}\n    };\n    handleAdd = (event) => {\n        event.preventDefault();\n        // console.log('this is the state of the log-in page', this.state);\n        let dataObj ={...this.state};\n        dataObj.password = funcs_.encryptPW(this.state.password);\n        // console.log(\"this is the hashed password, \", dataObj.password);\n        axios.post('/register', dataObj).then((res, err) => {\n            // console.log('just wanted to see the error ', err);\n            if(err){\n                // console.log('There was an error ', err);\n            }else{\n                // res.status(200).json({message: 'this is the data' + res});\n                if(res.data.data === 0) {\n                    // console.log('Data was not Added.  User already exist ', res);\n                    this.setState({open1: true});\n                }\n                else if(res.data.data === 3 ) {\n                    // console.log('Data was not Added.  User already exist ', res);\n                    this.setState({open1: true});\n                }\n                else {\n                    // console.log('Data was added ', res);\n                    this.setState({open4: true});\n                }\n            }\n        }).catch((e) => {\n            // console.log('Error: ', e);\n        });\n    };\n    render() {\n\n        return (\n            <div>\n                {/*{window.location ==+ '/' ? <Redirect from=\"/\" exact to=\"/login1\" /> : ''}*/}\n                <Switch>\n                    <Redirect exact from=\"/\" to=\"/login1\"/>\n                    <Route exact path=\"/login1\"><Login1 getValue={this.getValue.bind(this)}  usrname={this.state.usrname} open3={this.state.open3} open4={this.state.open4} open5={this.state.open5} handlesubmit={this.handlesubmit.bind(this)} handleAdd={this.handleAdd.bind(this)} open={this.state.open} open1={this.state.open1} handleClose={this.handleClose.bind(this)}/></Route>\n                    <Route exact path=\"/signup\" component={SignUP}/>\n                    <Route exact path=\"/forgotdorwssap\" component={passwordRS}/>\n                    <Route exact path ='/updateinfo/:id' component={update}/>\n                    <PrivateRoute exact path=\"/home_page\" component={this.myDashboardPage} auth={this.state.auth}/>\n                    <PrivateRoute exact path=\"/manage_inv\" component={this.myCheckOutPage} auth={this.state.auth}/>\n                    <PrivateRoute exact path=\"/reporting\" component={this.myReportingPage} auth={this.state.auth}/>\n                </Switch>\n            </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}