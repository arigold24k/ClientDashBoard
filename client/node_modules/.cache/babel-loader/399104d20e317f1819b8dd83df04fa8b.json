{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\avidal\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\avidal\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\avidal\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\avidal\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\avidal\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _defineProperty from\"C:\\\\Users\\\\avidal\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React from'react';import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import Paper from'@material-ui/core/Paper';import withStyles from'@material-ui/core/styles/withStyles';import axios from'axios';import Modal from'@material-ui/core/Modal';//import Link from '@material-ui/core/Link';\nvar styles=function styles(theme){var _layout;return{modal:{position:'absolute',width:theme.spacing.unit*50,backgroundColor:theme.palette.background.paper,boxShadow:theme.shadows[5],padding:theme.spacing.unit*4,outline:'none'},button:{marginTop:theme.spacing.unit*3,marginLeft:theme.spacing.unit// justifyContent: 'center',\n// align: 'center',\n},layout:(_layout={width:'auto',marginLeft:theme.spacing.unit*2,marginRight:theme.spacing.unit*2},_defineProperty(_layout,theme.breakpoints.up(600+theme.spacing.unit*2*2),{width:600,marginLeft:'auto',marginRight:'auto'}),_defineProperty(_layout,\"textAlign\",'center'),_layout),paper:_defineProperty({marginTop:theme.spacing.unit*3,marginBottom:theme.spacing.unit*3,padding:theme.spacing.unit*2},theme.breakpoints.up(600+theme.spacing.unit*3*2),{marginTop:theme.spacing.unit*6,marginBottom:theme.spacing.unit*6,padding:theme.spacing.unit*3})};};function getModalStyle(){var top=50+rand();var left=50+rand();return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}function rand(){return Math.round(Math.random()*20)-10;}var initial_State={username:'',email:'',open1:false,open2:false,open3:false,open4:false,openerror:false};var passwordrst=/*#__PURE__*/function(_React$Component){_inherits(passwordrst,_React$Component);function passwordrst(props){var _this;_classCallCheck(this,passwordrst);_this=_possibleConstructorReturn(this,_getPrototypeOf(passwordrst).call(this,props));_this.handleSubmit=function(){var dataObj={username:_this.state.username,email:_this.state.email};if(_this.state.username!==''&&_this.state.email!==''){axios.post('/passwordReset',dataObj).then(function(res){//value 1 is when the username does not exist\n// console.log(\"This is the reponse to the password reset, \", res.data);\nif(res.status===200){if(res.data.data===1){//username does not match\n_this.setState({open1:true});}else if(res.data.data===2){//email does not match\n_this.setState({open2:true});}else if(res.data.data===3){//error adding the data\n_this.setState({open3:true});}else if(res.data.data){//add code to send email to client\n_this.setState({id:res.data.data.data.id});_this.handleSendEmail(_this.state.email,\"Password Reset\",\"Please follow the link below to Reset Password. \\n  \".concat(window.location.origin,\"/updateinfo/\").concat(_this.state.id));}}}).catch(function(err){if(err){_this.setState({open3:true});}});}else{_this.setState({openerror:true});}};_this.handleSendEmail=function(v_to_email,v_subject,v_body){var dataObj={SEND_TO:v_to_email,SUBJECT:v_subject,MESSAGE:v_body};axios.post('/sendEmail',dataObj).then(function(res){if(res.data.data&&res.data.data!==3){_this.setState({open4:true});}}).catch();};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handlemodalClose=function(){_this.setState(initial_State);};_this.state=initial_State;return _this;}_createClass(passwordrst,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;return React.createElement(React.Fragment,null,React.createElement(CssBaseline,null),React.createElement(\"main\",{className:classes.layout},React.createElement(Paper,{className:classes.paper},React.createElement(Typography,{variant:\"h6\",gutterBottom:true,align:\"center\",color:\"primary\"},\"Please provide the following:\"),React.createElement(Grid,{container:true,spacing:24},React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{required:true,id:\"username\",name:\"username\",label:\"User Name\",fullWidth:true,autoComplete:\"username\",onChange:this.handleChange,value:this.state.username})),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{required:true,id:\"email\",name:\"email\",label:\"Email\",fullWidth:true,autoComplete:\"usnm\",onChange:this.handleChange,value:this.state.email})),React.createElement(Grid,{item:true,xs:12},React.createElement(Button,{className:classes.button,size:\"small\",variant:\"contained\",color:\"primary\",onClick:this.handleSubmit},\"Submit\"))))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open1,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},this.state.username,\" is not a valid username. Provide a valid Username.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open2,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},this.state.email,\" is not a valid E-Mail. Provide a valid E-Mail.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open3,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},\"There was an error processing your request.  Please try close the browser and retry.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open4,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Click on Link below\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},\"An email has been sent to the email address on file with directions on how to reset your password.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.openerror,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},\"Please make sure all fields are filled out.\"))));}}]);return passwordrst;}(React.Component);export default withStyles(styles)(passwordrst);","map":{"version":3,"sources":["C:\\Users\\avidal\\ClientDashBoard\\client\\src\\components\\PasswordReset\\passwordrst.js"],"names":["React","Grid","Typography","TextField","Button","CssBaseline","Paper","withStyles","axios","Modal","styles","theme","modal","position","width","spacing","unit","backgroundColor","palette","background","paper","boxShadow","shadows","padding","outline","button","marginTop","marginLeft","layout","marginRight","breakpoints","up","marginBottom","getModalStyle","top","rand","left","transform","Math","round","random","initial_State","username","email","open1","open2","open3","open4","openerror","passwordrst","props","handleSubmit","dataObj","state","post","then","res","status","data","setState","id","handleSendEmail","window","location","origin","catch","err","v_to_email","v_subject","v_body","SEND_TO","SUBJECT","MESSAGE","handleChange","event","target","name","value","handlemodalClose","classes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Paper from '@material-ui/core/Paper';\nimport PropTypes from \"prop-types\";\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport axios from 'axios';\nimport Modal from '@material-ui/core/Modal';\n//import Link from '@material-ui/core/Link';\n\n\nconst styles = theme => ({\n    modal: {\n        position: 'absolute',\n        width: theme.spacing.unit * 50,\n        backgroundColor: theme.palette.background.paper,\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing.unit * 4,\n        outline: 'none',\n    },\n    button: {\n        marginTop: theme.spacing.unit * 3,\n        marginLeft: theme.spacing.unit,\n        // justifyContent: 'center',\n        // align: 'center',\n    },\n    layout: {\n        width: 'auto',\n        marginLeft: theme.spacing.unit * 2,\n        marginRight: theme.spacing.unit * 2,\n        [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n            width: 600,\n            marginLeft: 'auto',\n            marginRight: 'auto',\n        },\n        textAlign: 'center',\n    },\n    paper: {\n        marginTop: theme.spacing.unit * 3,\n        marginBottom: theme.spacing.unit * 3,\n        padding: theme.spacing.unit * 2,\n        [theme.breakpoints.up(600 + theme.spacing.unit * 3 * 2)]: {\n            marginTop: theme.spacing.unit * 6,\n            marginBottom: theme.spacing.unit * 6,\n            padding: theme.spacing.unit * 3,\n        },\n\n    },\n});\n\nfunction getModalStyle() {\n    const top = 50 + rand();\n    const left = 50 + rand();\n\n    return {\n        top: `${top}%`,\n        left: `${left}%`,\n        transform: `translate(-${top}%, -${left}%)`,\n    };\n}\n\nfunction rand() {\n    return Math.round(Math.random() * 20) - 10;\n}\n\nconst initial_State = {\n    username: '',\n    email: '',\n    open1: false,\n    open2: false,\n    open3: false,\n    open4: false,\n    openerror: false\n};\n\nclass passwordrst extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = initial_State;\n    }\n    handleSubmit = () => {\n        const dataObj = {\n          username: this.state.username,\n          email: this.state.email\n        };\n        if (this.state.username !== '' && this.state.email !== '') {\n            axios.post('/passwordReset', dataObj).then((res) => {\n                //value 1 is when the username does not exist\n                // console.log(\"This is the reponse to the password reset, \", res.data);\n                if(res.status === 200) {\n                    if(res.data.data === 1) {\n                        //username does not match\n                        this.setState({open1: true})\n                    }else if (res.data.data === 2) {\n                        //email does not match\n                        this.setState({open2: true})\n                    }else if (res.data.data === 3) {\n                        //error adding the data\n                        this.setState({open3: true})\n                    }\n                    else if (res.data.data) {\n                        //add code to send email to client\n                        this.setState({id: res.data.data.data.id});\n                        this.handleSendEmail(this.state.email, \"Password Reset\", `Please follow the link below to Reset Password. \\n  ${window.location.origin}/updateinfo/${this.state.id}`);\n                    }\n                }\n            }).catch((err) => {\n                if(err) {\n                    this.setState({open3: true})\n                }\n            })\n        }else{\n            this.setState({openerror: true})\n        }\n    };\n\n    handleSendEmail = (v_to_email, v_subject, v_body) => {\n        const dataObj = {\n            SEND_TO: v_to_email,\n            SUBJECT: v_subject,\n            MESSAGE: v_body\n        };\n\n        axios.post('/sendEmail', dataObj).then((res) => {\n            if (res.data.data && res.data.data !== 3) {\n                this.setState({open4: true});\n            }\n        }).catch()\n    };\n\n    handleChange = (event) => {\n        const {name, value} = event.target;\n        this.setState({\n            [name] : value\n        })\n    };\n    handlemodalClose = () => {\n          this.setState(initial_State);\n    };\n\n    render () {\n        const {classes} = this.props;\n        return (\n        <React.Fragment>\n        <CssBaseline />\n            <main className={classes.layout}>\n                <Paper className={classes.paper}>\n                <Typography variant=\"h6\" gutterBottom align=\"center\" color=\"primary\">\n                    Please provide the following:\n                </Typography>\n                <Grid container spacing={24}>\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            id=\"username\"\n                            name=\"username\"\n                            label=\"User Name\"\n                            fullWidth\n                            autoComplete=\"username\"\n                            onChange={this.handleChange}\n                            value={this.state.username}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            id=\"email\"\n                            name=\"email\"\n                            label=\"Email\"\n                            fullWidth\n                            autoComplete=\"usnm\"\n                            onChange={this.handleChange}\n                            value={this.state.email}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Button\n                            className={classes.button}\n                            size=\"small\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            onClick={this.handleSubmit}\n                        >\n                            Submit\n                        </Button>\n                    </Grid>\n                </Grid>\n            </Paper>\n        </main>\n        <Modal\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n            open={this.state.open1}\n            onClose={() => {this.handlemodalClose()}}\n        >\n            <div style={getModalStyle()} className={classes.modal}>\n                <Typography variant=\"h6\" id=\"modal-title\">\n                    Error\n                </Typography>\n                <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\n                    {this.state.username} is not a valid username. Provide a valid Username.\n                </Typography>\n            </div>\n        </Modal>\n            <Modal\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n                open={this.state.open2}\n                onClose={() => {this.handlemodalClose()}}\n            >\n                <div style={getModalStyle()} className={classes.modal}>\n                    <Typography variant=\"h6\" id=\"modal-title\">\n                        Error\n                    </Typography>\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\n                        {this.state.email} is not a valid E-Mail. Provide a valid E-Mail.\n                    </Typography>\n                </div>\n            </Modal>\n            <Modal\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n                open={this.state.open3}\n                onClose={() => {this.handlemodalClose()}}\n            >\n                <div style={getModalStyle()} className={classes.modal}>\n                    <Typography variant=\"h6\" id=\"modal-title\">\n                        Error\n                    </Typography>\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\n                        There was an error processing your request.  Please try close the browser and retry.\n                    </Typography>\n                </div>\n            </Modal>\n            <Modal\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n                open={this.state.open4}\n                onClose={() => {this.handlemodalClose()}}\n            >\n                <div style={getModalStyle()} className={classes.modal}>\n                    <Typography variant=\"h6\" id=\"modal-title\">\n                        Click on Link below\n                    </Typography>\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\n                        An email has been sent to the email address on file with directions on how to reset your password.\n                    </Typography>\n                </div>\n            </Modal>\n            <Modal\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n                open={this.state.openerror}\n                onClose={() => {this.handlemodalClose()}}\n            >\n                <div style={getModalStyle()} className={classes.modal}>\n                    <Typography variant=\"h6\" id=\"modal-title\">\n                        Error\n                    </Typography>\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\n                        Please make sure all fields are filled out.\n                        {/*<Link href={`/updateinfo/${this.state.id}`} className={classes.link}>Click Here</Link>*/}\n                    </Typography>\n                </div>\n            </Modal>\n    </React.Fragment>\n        )\n    }\n}\npasswordrst.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(passwordrst);"]},"metadata":{},"sourceType":"module"}