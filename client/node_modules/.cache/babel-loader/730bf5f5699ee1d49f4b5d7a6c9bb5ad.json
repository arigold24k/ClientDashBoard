{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\project2\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Login1 from \"./pages/Login1\";\nimport Checkout from './pages/ClientCheckout';\nimport Report from './pages/Reporting';\nimport axios from 'axios';\nimport './App.css';\nimport { withRouter } from 'react-router-dom';\nimport PrivateRoute from './components/PrivateRoute';\nimport SignUP from './pages/SignUpPage';\nimport funcs_ from '../../functions/functions';\nvar initialState = {\n  open1: false,\n  open3: false,\n  redirectToRefererrer: false,\n  open: false,\n  open4: false,\n  open5: false,\n  auth: false\n};\n\nfunction refreshPage() {\n  window.location.reload();\n}\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.myCheckOutPage = function () {\n      return React.createElement(Checkout, {\n        handleSignOut: _this.signOut.bind(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      });\n    };\n\n    _this.myReportingPage = function () {\n      return React.createElement(Report, {\n        handleSignOut: _this.signOut.bind(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      });\n    };\n\n    _this.getencrypPW = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n      value = funcs_.encryptPW(value);\n\n      if (value !== 0) {\n        _this.setState(_defineProperty({}, name, value));\n      }\n    };\n\n    _this.getValue = function (event) {\n      // Updates the input state\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.clearState = function () {\n      _this.setState(initialState);\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false,\n        open1: false\n      });\n\n      _this.clearState();\n\n      refreshPage();\n    };\n\n    _this.handlesubmit = function (event) {\n      event.preventDefault();\n      console.log(\"YOu just pressed the button\");\n      console.log('this is the state, ', _this.state);\n      console.log('this is the environment variable ', process.env);\n\n      if ((typeof _this.state.usrname === 'undefined' || _this.state.usrname == null) && (typeof _this.state.password === 'undefined' || _this.state.password == null)) {\n        _this.setState({\n          open3: true\n        });\n      } else {\n        axios.post('/login', _this.state).then(function (res, err) {\n          console.log('this is the response for the login', res);\n          console.log('this is the response for the login', res.data.data);\n\n          if (typeof res.data.token !== 'undefined') {\n            //save this on local storage\n            sessionStorage.setItem('token', res.data.token);\n\n            _this.setState({\n              auth: true\n            });\n\n            console.log('this is the state after the auth was udpated ', _this.state);\n\n            _this.props.history.push('/home_page');\n          } else if (res.data.data === 'noUser') {\n            _this.setState({\n              open5: true\n            });\n          } else {\n            _this.setState({\n              open: true\n            });\n          } //put comments\n\n        }).catch(function (e) {\n          console.log('Error: ', e);\n        });\n      }\n    };\n\n    _this.handleAdd = function (event) {\n      event.preventDefault();\n      console.log('this is the state of the log-in page', _this.state);\n      axios.post('/register', _this.state).then(function (res, err) {\n        console.log('just wanted to see the error ', err);\n\n        if (err) {\n          console.log('There was an error ', err);\n        } else {\n          // res.status(200).json({message: 'this is the data' + res});\n          if (res.data.data === 0) {\n            console.log('Data was not Added.  User already exist ', res);\n\n            _this.setState({\n              open1: true\n            });\n          } else {\n            console.log('Data was added ', res);\n\n            _this.setState({\n              open4: true\n            });\n          }\n        }\n      }).catch(function (e) {\n        console.log('Error: ', e);\n      });\n    };\n\n    _this.state = initialState;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"signOut\",\n    value: function signOut() {\n      sessionStorage.removeItem('token');\n      this.setState({\n        auth: false\n      });\n      window.location.reload();\n    }\n  }, {\n    key: \"getKey\",\n    value: function getKey() {\n      var _this2 = this;\n\n      var token = window.sessionStorage.getItem('token');\n      console.log('before it hits the api verify route ', token);\n      console.log(\"This is the path, \", window.location);\n      var error;\n\n      if (token !== null) {\n        axios.post('/api/verify', {\n          token: token\n        }).then(function (res, err) {\n          console.log('This is the response from the getkey route ', res.data);\n          console.log('This is the type of for the res.data ', typeof res.data);\n          console.log('this is the data for res.data.data ', res.data.data);\n          error = err; // return res.data.data === true;\n\n          if (res.data.data === true) {\n            _this2.setState({\n              auth: true\n            });\n          } else {\n            _this2.setState({\n              auth: false\n            });\n          }\n\n          if (_this2.props.location.pathname === '/login1' && _this2.state.auth === true) {\n            _this2.props.history.push('/home_page');\n          }\n        });\n      } else {\n        this.setState({\n          auth: false\n        });\n      }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getKey();\n      console.log('This is the state in the component will mount ', this.state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/login1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Login1, {\n        getValue: this.getValue.bind(this),\n        getencrypPW: this.getencrypPW.bind(this),\n        usrname: this.state.usrname,\n        open3: this.state.open3,\n        open4: this.state.open4,\n        open5: this.state.open5,\n        handlesubmit: this.handlesubmit.bind(this),\n        handleAdd: this.handleAdd.bind(this),\n        open: this.state.open,\n        open1: this.state.open1,\n        handleClose: this.handleClose.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(Route, {\n        exacht: true,\n        path: \"/signup\",\n        component: SignUP,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        exact: true,\n        path: \"/home_page\",\n        component: this.myCheckOutPage,\n        auth: this.state.auth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        exact: true,\n        path: \"/reporting\",\n        component: this.myReportingPage,\n        auth: this.state.auth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["C:\\Users\\avidal\\Documents\\WebApps\\project2\\client\\src\\App.js"],"names":["React","Component","BrowserRouter","Router","Route","Switch","Login1","Checkout","Report","axios","withRouter","PrivateRoute","SignUP","funcs_","initialState","open1","open3","redirectToRefererrer","open","open4","open5","auth","refreshPage","window","location","reload","App","props","myCheckOutPage","signOut","bind","myReportingPage","getencrypPW","event","name","target","value","encryptPW","setState","getValue","clearState","handleClose","handlesubmit","preventDefault","console","log","state","process","env","usrname","password","post","then","res","err","data","token","sessionStorage","setItem","history","push","catch","e","handleAdd","removeItem","getItem","error","pathname","getKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Login1 from \"./pages/Login1\";\nimport Checkout from './pages/ClientCheckout';\nimport Report from './pages/Reporting';\nimport axios from 'axios';\nimport './App.css';\nimport { withRouter } from 'react-router-dom';\nimport PrivateRoute from './components/PrivateRoute';\nimport SignUP from './pages/SignUpPage';\nimport funcs_ from '../../functions/functions';\n\nconst initialState = {open1: false,\n    open3: false,\n    redirectToRefererrer: false,\n    open: false,\n    open4: false,\n    open5: false,\n    auth: false\n};\n\nfunction refreshPage() {\n  window.location.reload();\n}\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = initialState;\n    }\n\n    myCheckOutPage = () => {\n        return (\n            <Checkout handleSignOut={this.signOut.bind(this)} />\n        )\n    };\n\n    myReportingPage = () => {\n        return (\n            <Report handleSignOut={this.signOut.bind(this)} />\n        )\n    };\n\n    signOut(){\n        sessionStorage.removeItem('token');\n        this.setState({auth: false});\n        window.location.reload();\n    };\n\n    getKey (){\n        const token = window.sessionStorage.getItem('token');\n        console.log('before it hits the api verify route ', token);\n        console.log(\"This is the path, \", window.location);\n        let error;\n        if(token !== null) {\n            axios.post('/api/verify', {token}).then((res, err) => {\n\n                console.log('This is the response from the getkey route ', res.data);\n                console.log('This is the type of for the res.data ', typeof res.data);\n                console.log('this is the data for res.data.data ', res.data.data);\n                error = err;\n                // return res.data.data === true;\n                if(res.data.data === true){\n                    this.setState({auth: true})\n                }else{\n                    this.setState({auth:false})\n                }\n                if(this.props.location.pathname ==='/login1' && this.state.auth === true) {\n                    this.props.history.push('/home_page');\n                }\n            });\n        }else{\n            this.setState({auth:false})\n        }\n    }\n\n    componentWillMount(){\n        this.getKey();\n        console.log('This is the state in the component will mount ', this.state);\n      };\n\n    getencrypPW = (event) => {\n        const {name} = event.target;\n        let {value} =  event.target;\n        value = funcs_.encryptPW(value);\n        if (value !== 0) {\n            this.setState({\n                [name]: value\n            })\n        }\n\n\n    };\n\n    getValue = (event) => {\n        // Updates the input state\n        const {name, value} = event.target;\n        this.setState(\n            {\n                [name]: value\n            }\n        );\n    };\n\n    clearState = () => {\n        this.setState(initialState)\n    };\n\n    handleClose = () => {\n        this.setState({ open: false, open1: false });\n        this.clearState();\n        refreshPage();\n    };\n\n    handlesubmit = (event) => {\n        event.preventDefault();\n        console.log(\"YOu just pressed the button\");\n        console.log('this is the state, ', this.state);\n        console.log('this is the environment variable ', process.env);\n        if((typeof (this.state.usrname) === 'undefined' || (this.state.usrname == null)) && (typeof this.state.password === 'undefined' || this.state.password == null)) {\n            this.setState({open3: true});\n        }else {\n        axios.post('/login', this.state).then((res, err) => {\n            console.log('this is the response for the login', res);\n            console.log('this is the response for the login', res.data.data);\n            if(typeof res.data.token !== 'undefined') {\n                //save this on local storage\n                sessionStorage.setItem('token', res.data.token);\n                this.setState({auth: true});\n                console.log('this is the state after the auth was udpated ', this.state);\n                this.props.history.push('/home_page');\n            }else if (res.data.data === 'noUser') {\n                this.setState({open5:true})\n            }else{\n                this.setState({open: true});\n            }\n            //put comments\n        }).catch((e) => {\n            console.log('Error: ', e);\n        });}\n    };\n\n    handleAdd = (event) => {\n        event.preventDefault();\n        console.log('this is the state of the log-in page', this.state);\n        axios.post('/register', this.state).then((res, err) => {\n            console.log('just wanted to see the error ', err);\n            if(err){\n                console.log('There was an error ', err);\n            }else{\n                // res.status(200).json({message: 'this is the data' + res});\n                if(res.data.data === 0) {\n                    console.log('Data was not Added.  User already exist ', res);\n                    this.setState({open1: true});\n                }else {\n                    console.log('Data was added ', res);\n                    this.setState({open4: true});\n                }\n            }\n        }).catch((e) => {\n            console.log('Error: ', e);\n        });\n    };\n\n    render() {\n        return (\n            <div>\n                <Switch>\n                    <Route exact path=\"/login1\"><Login1 getValue={this.getValue.bind(this)} getencrypPW={this.getencrypPW.bind(this)} usrname={this.state.usrname} open3={this.state.open3} open4={this.state.open4} open5={this.state.open5} handlesubmit={this.handlesubmit.bind(this)} handleAdd={this.handleAdd.bind(this)} open={this.state.open} open1={this.state.open1} handleClose={this.handleClose.bind(this)}/></Route>\n                    <Route exacht path=\"/signup\" component={SignUP}/>\n                    <PrivateRoute exact path=\"/home_page\" component={this.myCheckOutPage} auth={this.state.auth}/>\n                    <PrivateRoute exact path=\"/reporting\" component={this.myReportingPage} auth={this.state.auth}/>\n                </Switch>\n            </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}