{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _defineProperty from\"C:\\\\Users\\\\avidal\\\\Documents\\\\WebApps\\\\clientDashboard\\\\ClientDashBoard\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React from'react';import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import Paper from'@material-ui/core/Paper';import withStyles from'@material-ui/core/styles/withStyles';import axios from'axios';import Modal from'@material-ui/core/Modal';import Link from'@material-ui/core/Link';var styles=function styles(theme){var _layout;return{modal:{position:'absolute',width:theme.spacing.unit*50,backgroundColor:theme.palette.background.paper,boxShadow:theme.shadows[5],padding:theme.spacing.unit*4,outline:'none'},button:{marginTop:theme.spacing.unit*3,marginLeft:theme.spacing.unit// justifyContent: 'center',\n// align: 'center',\n},layout:(_layout={width:'auto',marginLeft:theme.spacing.unit*2,marginRight:theme.spacing.unit*2},_defineProperty(_layout,theme.breakpoints.up(600+theme.spacing.unit*2*2),{width:600,marginLeft:'auto',marginRight:'auto'}),_defineProperty(_layout,\"textAlign\",'center'),_layout),paper:_defineProperty({marginTop:theme.spacing.unit*3,marginBottom:theme.spacing.unit*3,padding:theme.spacing.unit*2},theme.breakpoints.up(600+theme.spacing.unit*3*2),{marginTop:theme.spacing.unit*6,marginBottom:theme.spacing.unit*6,padding:theme.spacing.unit*3})};};function getModalStyle(){var top=50+rand();var left=50+rand();return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}function rand(){return Math.round(Math.random()*20)-10;}var initial_State={username:'',email:'',open1:false,open2:false,open3:false,open4:false};var passwordrst=/*#__PURE__*/function(_React$Component){_inherits(passwordrst,_React$Component);function passwordrst(props){var _this;_classCallCheck(this,passwordrst);_this=_possibleConstructorReturn(this,_getPrototypeOf(passwordrst).call(this,props));_this.handleSubmit=function(){var dataObj={username:_this.state.username,email:_this.state.email};axios.post('/passwordReset',dataObj).then(function(res){//value 1 is when the username does not exist\n// console.log(\"This is the reponse to the password reset, \", res.data);\nif(res.status===200){if(res.data.data===1){//username does not match\n_this.setState({open1:true});}else if(res.data.data===2){//email does not match\n_this.setState({open2:true});}else if(res.data.data===3){//error adding the data\n_this.setState({open3:true});}else if(res.data.data){//add code to send email to client\n_this.setState({id:res.data.data.data.id});_this.handleSendEmail(_this.state.email,\"Inventroy Summary Report\",\"Please follow the link below to Reset Password. \\n  http://localhost:3000/updateinfo/\".concat(_this.state.id));}}}).catch(function(err){});};_this.handleSendEmail=function(v_to_email,v_subject,v_body){var dataObj={SEND_TO:v_to_email,SUBJECT:v_subject,MESSAGE:v_body};axios.post('/sendEmail',dataObj).then(function(res){if(res.data.data&&res.data.data!==3){_this.setState({open4:true});}}).catch();};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handlemodalClose=function(){_this.setState(initial_State);};_this.state=initial_State;return _this;}_createClass(passwordrst,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;return React.createElement(React.Fragment,null,React.createElement(CssBaseline,null),React.createElement(\"main\",{className:classes.layout},React.createElement(Paper,{className:classes.paper},React.createElement(Typography,{variant:\"h6\",gutterBottom:true,align:\"center\",color:\"primary\"},\"Please provide the following:\"),React.createElement(Grid,{container:true,spacing:24},React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{required:true,id:\"username\",name:\"username\",label:\"User Name\",fullWidth:true,autoComplete:\"username\",onChange:this.handleChange,value:this.state.username})),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{required:true,id:\"email\",name:\"email\",label:\"Email\",fullWidth:true,autoComplete:\"usnm\",onChange:this.handleChange,value:this.state.email})),React.createElement(Grid,{item:true,xs:12},React.createElement(Button,{className:classes.button,size:\"small\",variant:\"contained\",color:\"primary\",onClick:this.handleSubmit},\"Submit\"))))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open1,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},this.state.username,\" is not a valid username. Provide a valid Username.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open2,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},this.state.email,\" is not a valid E-Mail. Provide a valid E-Mail.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open3,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Error\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},\"There was an error processing your request.  Please try close the browser and retry.\"))),React.createElement(Modal,{\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",open:this.state.open4,onClose:function onClose(){_this2.handlemodalClose();}},React.createElement(\"div\",{style:getModalStyle(),className:classes.modal},React.createElement(Typography,{variant:\"h6\",id:\"modal-title\"},\"Click on Link below\"),React.createElement(Typography,{variant:\"subtitle1\",id:\"simple-modal-description\"},\"An email has been sent to the email address on file with directions on how to reset your password.\"))));}}]);return passwordrst;}(React.Component);export default withStyles(styles)(passwordrst);","map":{"version":3,"sources":["C:\\Users\\avidal\\Documents\\WebApps\\clientDashboard\\ClientDashBoard\\client\\src\\components\\PasswordReset\\passwordrst.js"],"names":["React","Grid","Typography","TextField","Button","CssBaseline","Paper","withStyles","axios","Modal","Link","styles","theme","modal","position","width","spacing","unit","backgroundColor","palette","background","paper","boxShadow","shadows","padding","outline","button","marginTop","marginLeft","layout","marginRight","breakpoints","up","marginBottom","getModalStyle","top","rand","left","transform","Math","round","random","initial_State","username","email","open1","open2","open3","open4","passwordrst","props","handleSubmit","dataObj","state","post","then","res","status","data","setState","id","handleSendEmail","catch","err","v_to_email","v_subject","v_body","SEND_TO","SUBJECT","MESSAGE","handleChange","event","target","name","value","handlemodalClose","classes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport PropTypes from \"prop-types\";\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport axios from 'axios';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Link from '@material-ui/core/Link';\r\n\r\n\r\nconst styles = theme => ({\r\n    modal: {\r\n        position: 'absolute',\r\n        width: theme.spacing.unit * 50,\r\n        backgroundColor: theme.palette.background.paper,\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing.unit * 4,\r\n        outline: 'none',\r\n    },\r\n    button: {\r\n        marginTop: theme.spacing.unit * 3,\r\n        marginLeft: theme.spacing.unit,\r\n        // justifyContent: 'center',\r\n        // align: 'center',\r\n    },\r\n    layout: {\r\n        width: 'auto',\r\n        marginLeft: theme.spacing.unit * 2,\r\n        marginRight: theme.spacing.unit * 2,\r\n        [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\r\n            width: 600,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n        textAlign: 'center',\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing.unit * 3,\r\n        marginBottom: theme.spacing.unit * 3,\r\n        padding: theme.spacing.unit * 2,\r\n        [theme.breakpoints.up(600 + theme.spacing.unit * 3 * 2)]: {\r\n            marginTop: theme.spacing.unit * 6,\r\n            marginBottom: theme.spacing.unit * 6,\r\n            padding: theme.spacing.unit * 3,\r\n        },\r\n\r\n    },\r\n});\r\n\r\nfunction getModalStyle() {\r\n    const top = 50 + rand();\r\n    const left = 50 + rand();\r\n\r\n    return {\r\n        top: `${top}%`,\r\n        left: `${left}%`,\r\n        transform: `translate(-${top}%, -${left}%)`,\r\n    };\r\n}\r\n\r\nfunction rand() {\r\n    return Math.round(Math.random() * 20) - 10;\r\n}\r\n\r\nconst initial_State = {\r\n    username: '',\r\n    email: '',\r\n    open1: false,\r\n    open2: false,\r\n    open3: false,\r\n    open4: false\r\n};\r\n\r\nclass passwordrst extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = initial_State;\r\n    }\r\n    handleSubmit = () => {\r\n        const dataObj = {\r\n          username: this.state.username,\r\n          email: this.state.email\r\n        };\r\n      axios.post('/passwordReset', dataObj).then((res) => {\r\n        //value 1 is when the username does not exist\r\n          // console.log(\"This is the reponse to the password reset, \", res.data);\r\n          if(res.status === 200) {\r\n              if(res.data.data === 1) {\r\n                  //username does not match\r\n                  this.setState({open1: true})\r\n              }else if (res.data.data === 2) {\r\n                  //email does not match\r\n                  this.setState({open2: true})\r\n              }else if (res.data.data === 3) {\r\n                  //error adding the data\r\n                  this.setState({open3: true})\r\n              }\r\n              else if (res.data.data) {\r\n                  //add code to send email to client\r\n                  this.setState({id: res.data.data.data.id});\r\n                  this.handleSendEmail(this.state.email, \"Inventroy Summary Report\", `Please follow the link below to Reset Password. \\n  http://localhost:3000/updateinfo/${this.state.id}`);\r\n              }\r\n          }\r\n      }).catch((err) => {\r\n\r\n      })\r\n    };\r\n\r\n    handleSendEmail = (v_to_email, v_subject, v_body) => {\r\n        const dataObj = {\r\n            SEND_TO: v_to_email,\r\n            SUBJECT: v_subject,\r\n            MESSAGE: v_body\r\n        };\r\n\r\n        axios.post('/sendEmail', dataObj).then((res) => {\r\n            if (res.data.data && res.data.data !== 3) {\r\n                this.setState({open4: true});\r\n            }\r\n        }).catch()\r\n    };\r\n\r\n    handleChange = (event) => {\r\n        const {name, value} = event.target;\r\n        this.setState({\r\n            [name] : value\r\n        })\r\n    };\r\n    handlemodalClose = () => {\r\n          this.setState(initial_State);\r\n    };\r\n    render () {\r\n        const {classes} = this.props;\r\n        return (\r\n        <React.Fragment>\r\n        <CssBaseline />\r\n            <main className={classes.layout}>\r\n                <Paper className={classes.paper}>\r\n                <Typography variant=\"h6\" gutterBottom align=\"center\" color=\"primary\">\r\n                    Please provide the following:\r\n                </Typography>\r\n                <Grid container spacing={24}>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            required\r\n                            id=\"username\"\r\n                            name=\"username\"\r\n                            label=\"User Name\"\r\n                            fullWidth\r\n                            autoComplete=\"username\"\r\n                            onChange={this.handleChange}\r\n                            value={this.state.username}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            required\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            label=\"Email\"\r\n                            fullWidth\r\n                            autoComplete=\"usnm\"\r\n                            onChange={this.handleChange}\r\n                            value={this.state.email}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Button\r\n                            className={classes.button}\r\n                            size=\"small\"\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={this.handleSubmit}\r\n                        >\r\n                            Submit\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n        </main>\r\n        <Modal\r\n            aria-labelledby=\"simple-modal-title\"\r\n            aria-describedby=\"simple-modal-description\"\r\n            open={this.state.open1}\r\n            onClose={() => {this.handlemodalClose()}}\r\n        >\r\n            <div style={getModalStyle()} className={classes.modal}>\r\n                <Typography variant=\"h6\" id=\"modal-title\">\r\n                    Error\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\r\n                    {this.state.username} is not a valid username. Provide a valid Username.\r\n                </Typography>\r\n            </div>\r\n        </Modal>\r\n            <Modal\r\n                aria-labelledby=\"simple-modal-title\"\r\n                aria-describedby=\"simple-modal-description\"\r\n                open={this.state.open2}\r\n                onClose={() => {this.handlemodalClose()}}\r\n            >\r\n                <div style={getModalStyle()} className={classes.modal}>\r\n                    <Typography variant=\"h6\" id=\"modal-title\">\r\n                        Error\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\r\n                        {this.state.email} is not a valid E-Mail. Provide a valid E-Mail.\r\n                    </Typography>\r\n                </div>\r\n            </Modal>\r\n            <Modal\r\n                aria-labelledby=\"simple-modal-title\"\r\n                aria-describedby=\"simple-modal-description\"\r\n                open={this.state.open3}\r\n                onClose={() => {this.handlemodalClose()}}\r\n            >\r\n                <div style={getModalStyle()} className={classes.modal}>\r\n                    <Typography variant=\"h6\" id=\"modal-title\">\r\n                        Error\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\r\n                        There was an error processing your request.  Please try close the browser and retry.\r\n                    </Typography>\r\n                </div>\r\n            </Modal>\r\n            <Modal\r\n                aria-labelledby=\"simple-modal-title\"\r\n                aria-describedby=\"simple-modal-description\"\r\n                open={this.state.open4}\r\n                onClose={() => {this.handlemodalClose()}}\r\n            >\r\n                <div style={getModalStyle()} className={classes.modal}>\r\n                    <Typography variant=\"h6\" id=\"modal-title\">\r\n                        Click on Link below\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\" id=\"simple-modal-description\">\r\n                        An email has been sent to the email address on file with directions on how to reset your password.\r\n                        {/*<Link href={`/updateinfo/${this.state.id}`} className={classes.link}>Click Here</Link>*/}\r\n                    </Typography>\r\n                </div>\r\n            </Modal>\r\n    </React.Fragment>\r\n        )\r\n    }\r\n}\r\npasswordrst.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(passwordrst);"]},"metadata":{},"sourceType":"module"}